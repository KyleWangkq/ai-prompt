# 支付模块全局术语表（Glossary）

## 文档信息
| 项目 | 内容 |
|------|------|
| **文档名称** | 支付模块全局术语表 |
| **文档版本** | v3.0 |
| **创建日期** | 2025年9月28日 |
| **更新日期** | 2025年1月 |
| **基准文档** | 支付模块需求设计文档 v1.5, 支付模块用例模型文档 v1.0 |
| **文档状态** | 正式版 |

## 术语体系概述

**体系版本**: v3.0
**建立依据**: 支付模块需求设计文档第3章术语定义，支付模块用例模型文档
**适用范围**: 企业间特种设备定制交易系统 - 支付模块 DDD架构设计
**维护策略**: 术语演进管理和版本控制

## 术语分类体系

### 按业务层次分类
- **战略层术语**: 支付模块、支付上下文、限界上下文边界相关术语
- **战术层术语**: 支付单聚合、支付流水实体、支付金额值对象相关术语  
- **技术层术语**: 支付渠道集成、回调处理、Repository接口相关术语

### 按架构层次分类
- **领域层术语**: 支付单、支付状态、支付规则、支付事件等核心业务概念
- **应用层术语**: 支付服务、合并支付、支付用例、DTO等应用协调概念
- **基础设施层术语**: 支付渠道、交易号、回调、数据映射等技术实现概念

### 按重要程度分类
- **核心术语**: 支付单、支付状态、支付金额等架构设计的关键概念，必须精确定义
- **重要术语**: 支付类型、支付渠道、合并支付等影响设计质量的概念，需要清晰定义
- **辅助术语**: 业务标签、优先级等支撑性概念，保持一致性即可

## 核心业务术语

| 中文术语 | 英文术语 | 术语分类 | 架构层次 | 定义 | 使用场景 | 需求来源 |
|---------|----------|----------|----------|------|----------|----------|
| 支付渠道 | Payment Channel | 基础概念 | 基础设施层 | 银联等第三方支付服务商，以及企业内部支付管理模块 | 支付执行、渠道集成 | 需求文档 3.1节 |
| 支付单 | Payment | 核心概念 | 领域层 | 系统内生成的支付请求记录，由支付模块生成唯一支付单号 | 支付单创建、支付执行、查询 | 需求文档 3.1节 |
| 支付单号 | Payment ID | 基础概念 | 领域层 | 由支付模块管理和生成的唯一流水号 | 支付单识别、关联查询 | 需求文档 3.1节 |
| 交易号 | Transaction ID | 基础概念 | 基础设施层 | 支付渠道返回的唯一交易编号 | 渠道对账、回调处理 | 需求文档 3.1节 |
| 回调 | Callback/Notify | 技术概念 | 基础设施层 | 支付渠道在支付完成后异步通知系统的机制 | 支付结果处理、状态更新 | 需求文档 3.1节 |
| 经销商ID | Reseller ID | 业务术语 | 领域层 | 支付方经销商的唯一标识 | 支付单创建、权限验证 | 需求文档 3.2节 |
| 支付单类型 | Payment Type | 业务术语 | 领域层 | 区分支付单的业务类型，如预付款、尾款、其他费用、信用还款等 | 支付单分类、业务处理 | 需求文档 3.2节 |
| 合并支付 | Batch Payment | 业务术语 | 应用层 | 多个支付单选择一个支付渠道进行合并支付 | 支付执行用例UC-PM-003 | 需求文档 3.2节 |
| 部分支付 | Partial Payment | 业务术语 | 领域层 | 支付单可以选择一个渠道支付部分金额，支持多次部分支付直到完成 | 支付执行、金额分配 | 需求文档 3.2节 |
| 已支付金额 | Paid Amount | 金额术语 | 领域层 | 支付单已经支付的累计金额 | 支付单状态管理、金额计算 | 需求文档 3.2节 |
| 待支付金额 | Pending Amount | 金额术语 | 领域层 | 支付单还需要支付的剩余金额 | 支付单状态管理、金额计算 | 需求文档 3.2节 |
| 信用支付 | Credit Payment | 业务术语 | 领域层 | 使用企业信用额度进行的支付，产生还款义务 | 信用渠道支付 | 需求文档 3.2节 |
| 信用还款 | Credit Repayment | 业务术语 | 领域层 | 企业对信用额度的还款操作，只是支付类型为"信用还款"的普通支付单，按统一支付流程处理 | 用例UC-PM-007、UC-PM-008 | 需求文档 3.2节 |
| 关联业务ID | Related Business ID | 业务术语 | 领域层 | 支付单关联的业务记录标识，支持不同业务场景的关联需求 | 信用还款、业务关联查询 | 需求文档 3.2节 |
| 关联业务类型 | Related Business Type | 业务术语 | 领域层 | 标识关联业务的类型，如CREDIT_RECORD（信用记录）、DELIVERY_ORDER（提货单）等 | 业务分类、关联查询 | 需求文档 3.2节 |
| 信用额度 | Credit Limit | 业务背景术语 | 外部系统 | 企业可使用的信用支付上限，由信用管理模块维护 | 信用支付验证 | 需求文档 3.2节 |
| 预付款 | Advance Payment | 支付类型 | 领域层 | 订单确认后的首期付款 | 支付单类型识别 | 需求文档 3.4节 |
| 尾款 | Final Payment | 支付类型 | 领域层 | 发货或完工后的最终付款 | 支付单类型识别 | 需求文档 3.4节 |
| 生产排产 | Production Scheduling | 业务背景术语 | 外部系统 | 订单系统管理的生产计划安排 | 业务背景理解 | 需求文档 3.4节 |
| 部分发货 | Partial Delivery | 业务背景术语 | 外部系统 | 订单系统管理的分批发货流程 | 业务背景理解 | 需求文档 3.4节 |
| 支付流水 | Payment Transaction | 核心概念 | 领域层 | 记录每一笔支付或退款操作的流水记录 | 支付执行、退款处理、流水查询 | 需求文档 4.4.2节 |
| 渠道交易号 | Channel Transaction Number | 技术概念 | 基础设施层 | 支付渠道返回的唯一交易编号，用于关联同一次渠道支付的多个支付单 | 合并支付、回调处理 | 需求文档 4.2.1节 |
| 实际收款金额 | Actual Amount | 金额术语 | 领域层 | 已支付金额 - 已退款金额 | 支付单金额管理 | 需求文档 4.4.1节 |
| 已退款金额 | Refunded Amount | 金额术语 | 领域层 | 支付单累计已退款的金额 | 退款管理、金额计算 | 需求文档 4.4.1节 |

## 状态和枚举术语

| 中文术语 | 英文术语 | 枚举类型 | 可选值 | 状态转换 | 业务规则 | 架构约束 |
|---------|----------|----------|---------|----------|----------|----------|
| 支付状态 | Payment Status | PaymentStatus | 未支付, 支付中, 部分支付, 已支付, 支付失败, 已停止, 已冻结 | 未支付→支付中→部分支付/已支付/支付失败 | 状态转换必须遵循业务流程 | 领域层状态管理必须严格控制转换路径 |
| 退款状态 | Refund Status | RefundStatus | 未退款, 退款中, 部分退款, 全额退款, 退款失败 | 未退款→退款中→部分退款/全额退款/退款失败 | 退款不能超过已支付金额 | 领域层必须验证退款业务规则 |
| 支付类型 | Payment Type | PaymentType | ADVANCE_PAYMENT(预付款), FINAL_PAYMENT(尾款), OTHER_PAYMENT(其他费用), CREDIT_REPAYMENT(信用还款) | 静态枚举，不涉及状态转换 | 不同类型有不同的业务处理逻辑 | 应用层服务需要根据类型分发处理 |
| 关联业务类型 | Related Business Type | RelatedBusinessType | CREDIT_RECORD(信用记录), DELIVERY_ORDER(提货单), ORDER(订单) | 静态枚举，不涉及状态转换 | 标识关联业务的类型 | 基础设施层需要支持不同类型的关联查询 |
| 流水类型 | Transaction Type | TransactionType | PAYMENT(支付), REFUND(退款) | 静态枚举，不涉及状态转换 | 区分正向和逆向资金流动 | 基础设施层流水记录和统计分析 |
| 流水状态 | Transaction Status | TransactionStatus | PROCESSING(处理中), SUCCESS(成功), FAILED(失败) | 处理中→成功/失败 | 流水状态影响支付单状态更新 | 基础设施层必须保证流水状态与渠道状态一致 |
| 支付渠道类型 | Payment Channel Type | PaymentChannel | ONLINE_PAYMENT(线上支付), WALLET_PAYMENT(钱包支付), WIRE_TRANSFER(电汇支付), CREDIT_ACCOUNT(信用账户) | 静态枚举，不涉及状态转换 | 不同渠道有不同的技术对接方式 | 基础设施层需要支持多渠道接入 |

## 领域层术语（Domain Layer Terms）

### 聚合根术语

| 中文术语 | 英文术语 | 聚合根类型 | 职责 | 使用场景 | 相关用例 |
|---------|----------|-----------|------|----------|----------|
| 支付单聚合 | Payment Aggregate | 聚合根 | 管理支付单的完整生命周期，包括创建、支付执行、退款处理、状态管理 | 所有支付相关操作 | UC-PM-001至UC-PM-009 |

### 实体术语

| 中文术语 | 英文术语 | 实体类型 | 父聚合 | 职责 | 使用场景 |
|---------|----------|----------|--------|------|----------|
| 支付流水实体 | PaymentTransaction Entity | 聚合内实体 | Payment | 记录支付单的每一笔支付或退款操作流水 | 支付执行、退款处理、流水查询 |

### 值对象术语

| 中文术语 | 英文术语 | 值对象类型 | 业务含义 | 不变式 | 使用场景 |
|---------|----------|-----------|---------|--------|----------|
| 支付金额 | PaymentAmount | 金额值对象 | 支付单的金额信息 | 金额必须大于0，最多6位小数 | 支付单创建、金额计算 |
| 支付单号 | PaymentId | 标识值对象 | 支付单的唯一标识 | 全局唯一，32位字符 | 支付单识别 |
| 流水号 | TransactionId | 标识值对象 | 支付流水的唯一标识 | 全局唯一，32位字符 | 流水识别 |
| 经销商标识 | ResellerId | 标识值对象 | 经销商的唯一标识 | 非空，32位字符 | 权限验证、支付单归属 |
| 订单号 | OrderId | 标识值对象 | 订单的唯一标识 | 非空，32位字符 | 支付单与订单关联 |

### 领域服务术语

| 中文术语 | 英文术语 | 服务类型 | 职责 | 使用场景 | 相关用例 |
|---------|----------|----------|------|----------|----------|
| 支付执行服务 | PaymentExecutionService | 领域服务 | 协调支付单聚合执行支付操作，处理渠道调用 | 执行支付操作 | UC-PM-003, UC-PM-008 |
| 退款执行服务 | RefundExecutionService | 领域服务 | 协调支付单聚合执行退款操作，选择退款流水 | 执行退款操作 | UC-PM-006 |

### 领域事件术语

| 中文术语 | 英文术语 | 事件类型 | 触发时机 | 订阅者 | 使用场景 |
|---------|----------|----------|----------|--------|----------|
| 支付单已创建事件 | PaymentCreated | 领域事件 | 支付单创建成功后 | 无 | UC-PM-001, UC-PM-007 |
| 支付已执行事件 | PaymentExecuted | 领域事件 | 支付回调处理完成并更新支付单状态后 | 订单系统、财务系统、信用管理系统 | UC-PM-004 |
| 退款已执行事件 | RefundExecuted | 领域事件 | 退款完成并更新支付单状态后 | 订单系统、财务系统 | UC-PM-006 |

## 应用层术语（Application Layer Terms）

### 应用服务术语

| 中文术语 | 英文术语 | 服务类型 | 职责 | 使用场景 | 相关用例 |
|---------|----------|----------|------|----------|----------|
| 支付单应用服务 | PaymentApplicationService | 应用服务 | 协调支付单的创建、查询、筛选等用例 | 支付单管理 | UC-PM-001, UC-PM-002, UC-PM-005, UC-PM-007 |
| 支付执行应用服务 | PaymentExecutionApplicationService | 应用服务 | 协调支付执行、回调处理、补偿查询用例 | 支付执行流程 | UC-PM-003, UC-PM-004, UC-PM-008, UC-PM-009 |
| 退款应用服务 | RefundApplicationService | 应用服务 | 协调退款执行用例 | 退款处理 | UC-PM-006 |

### DTO术语

| 中文术语 | 英文术语 | DTO类型 | 用途 | 使用场景 | 相关用例 |
|---------|----------|----------|------|----------|----------|
| 创建支付单请求 | CreatePaymentRequest | 输入DTO | 接收订单系统或信用管理系统创建支付单的请求 | 支付单创建 | UC-PM-001, UC-PM-007 |
| 支付执行请求 | PaymentExecutionRequest | 输入DTO | 接收经销商执行支付的请求 | 支付执行 | UC-PM-003, UC-PM-008 |
| 退款执行请求 | RefundExecutionRequest | 输入DTO | 接收订单系统执行退款的指令 | 退款执行 | UC-PM-006 |
| 支付单响应 | PaymentResponse | 输出DTO | 返回支付单基本信息 | 支付单创建、查询 | UC-PM-001, UC-PM-002, UC-PM-005, UC-PM-007 |
| 支付单详情响应 | PaymentDetailResponse | 输出DTO | 返回支付单完整信息，包括流水历史 | 支付单详细查询 | UC-PM-005 |
| 支付执行响应 | PaymentExecutionResponse | 输出DTO | 返回支付执行结果 | 支付执行 | UC-PM-003, UC-PM-008 |
| 退款执行响应 | RefundExecutionResponse | 输出DTO | 返回退款执行结果 | 退款执行 | UC-PM-006 |

## 基础设施层术语（Infrastructure Layer Terms）

### Repository术语

| 中文术语 | 英文术语 | Repository类型 | 管理对象 | 职责 | 使用场景 |
|---------|----------|----------------|---------|------|----------|
| 支付单仓储 | PaymentRepository | 聚合根仓储 | Payment聚合 | 支付单聚合的持久化和查询 | 所有支付单操作 |

### 数据对象术语

| 中文术语 | 英文术语 | 数据表 | 对应领域对象 | 职责 | 使用场景 |
|---------|----------|--------|-------------|------|----------|
| 支付单数据对象 | PaymentDO | cms_payment | Payment聚合根 | 支付单数据持久化 | 数据库操作 |
| 支付流水数据对象 | PaymentTransactionDO | cms_payment_transaction | PaymentTransaction实体 | 支付流水数据持久化 | 数据库操作 |

### 外部系统集成术语

| 中文术语 | 英文术语 | 系统类型 | 职责 | 集成方式 | 相关用例 |
|---------|----------|----------|------|----------|----------|
| 订单系统 | Order System | 外部系统 | 创建支付单、发起退款指令、接收支付结果通知 | 接口调用 | UC-PM-001, UC-PM-004, UC-PM-006 |
| 支付渠道 | Payment Channel | 外部系统 | 处理支付请求、返回支付结果、发送支付回调 | 接口调用 | UC-PM-003, UC-PM-004, UC-PM-006 |
| 信用管理系统 | Credit Management System | 外部系统 | 创建信用还款支付单、接收还款结果通知 | 接口调用 | UC-PM-007, UC-PM-008 |
| 财务系统 | Finance System | 外部系统 | 接收支付流水数据、接收退款流水数据 | 接口调用 | UC-PM-004, UC-PM-006 |

## 术语使用规范

### 术语一致性要求

1. **核心术语必须严格统一**
   - 聚合根名称：统一使用"Payment"（支付单），不使用"PaymentOrder"
   - 实体名称：统一使用"PaymentTransaction"（支付流水），不使用"PaymentRecord"
   - 状态枚举：严格使用定义的枚举值，不使用同义词

2. **中英文对照必须一致**
   - 所有技术文档和代码中使用英文术语
   - 所有业务文档中使用中文术语
   - 中英文术语必须一一对应

3. **术语层次必须清晰**
   - 领域层使用核心业务术语
   - 应用层使用服务和DTO术语
   - 基础设施层使用技术实现术语

### 术语变更管理

1. **变更申请**：任何术语变更必须先在Glossary-History.md中记录
2. **影响分析**：评估术语变更对所有设计文档的影响范围
3. **传播更新**：按照依赖关系依次更新所有相关文档
4. **版本控制**：术语变更触发文档版本号更新

### 术语命名约定

1. **聚合根命名**：使用核心业务概念的名词，如Payment
2. **实体命名**：使用业务概念的名词，如PaymentTransaction
3. **值对象命名**：使用业务属性的名词，如PaymentAmount
4. **服务命名**：使用动词+名词，如PaymentExecutionService
5. **事件命名**：使用过去式动词+名词，如PaymentCreated
6. **枚举命名**：使用名词，如PaymentStatus
7. **DTO命名**：使用名词+Request/Response，如CreatePaymentRequest

## 术语溯源和验证

### 需求文档溯源

| 术语 | 需求文档章节 | 页码/段落 | 验证状态 |
|------|-------------|-----------|----------|
| 支付单 | 3.1 基础概念 | 术语定义 | ✓ 已验证 |
| 支付渠道 | 3.1 基础概念 | 术语定义 | ✓ 已验证 |
| 合并支付 | 3.2 业务特定术语 | 术语定义 | ✓ 已验证 |
| 部分支付 | 3.2 业务特定术语 | 术语定义 | ✓ 已验证 |
| 信用还款 | 3.2 业务特定术语 | 术语定义 | ✓ 已验证 |
| 支付状态 | 3.3.1 支付状态 | 状态定义 | ✓ 已验证 |
| 退款状态 | 3.3.2 退款状态 | 状态定义 | ✓ 已验证 |

### 用例模型溯源

| 术语 | 用例编号 | 用例名称 | 验证状态 |
|------|---------|---------|----------|
| 支付单创建 | UC-PM-001 | 接收支付单创建请求 | ✓ 已验证 |
| 支付单筛选 | UC-PM-002 | 筛选支付单 | ✓ 已验证 |
| 支付执行 | UC-PM-003 | 执行支付操作 | ✓ 已验证 |
| 支付回调 | UC-PM-004 | 处理支付回调 | ✓ 已验证 |
| 支付查询 | UC-PM-005 | 查询支付单信息 | ✓ 已验证 |
| 退款执行 | UC-PM-006 | 接收退款执行指令 | ✓ 已验证 |
| 信用还款支付单创建 | UC-PM-007 | 创建信用还款支付单 | ✓ 已验证 |
| 信用还款支付执行 | UC-PM-008 | 执行信用还款支付 | ✓ 已验证 |
| 补偿查询 | UC-PM-009 | 补偿查询支付状态 | ✓ 已验证 |

## 术语演进历史

详细的术语演进历史请参见 [Glossary-History.md](./Glossary-History.md)

## 附录

### A. 术语快速索引

**按字母顺序**
- Actual Amount（实际收款金额）
- Advance Payment（预付款）
- Batch Payment（合并支付）
- Callback/Notify（回调）
- Credit Account（信用账户）
- Credit Limit（信用额度）
- Credit Payment（信用支付）
- Credit Repayment（信用还款）
- Final Payment（尾款）
- OrderId（订单号）
- Paid Amount（已支付金额）
- Partial Payment（部分支付）
- Payment（支付单）
- Payment Channel（支付渠道）
- Payment ID（支付单号）
- Payment Status（支付状态）
- Payment Transaction（支付流水）
- Payment Type（支付单类型）
- Pending Amount（待支付金额）
- Refund Status（退款状态）
- Refunded Amount（已退款金额）
- Related Business ID（关联业务ID）
- Related Business Type（关联业务类型）
- Reseller ID（经销商ID）
- Transaction ID（交易号）
- Transaction Status（流水状态）
- Transaction Type（流水类型）

### B. 术语分类图

```
支付模块术语体系
├── 核心业务术语
│   ├── 支付单（Payment）
│   ├── 支付流水（Payment Transaction）
│   ├── 支付渠道（Payment Channel）
│   └── 回调（Callback）
├── 金额术语
│   ├── 已支付金额（Paid Amount）
│   ├── 待支付金额（Pending Amount）
│   ├── 已退款金额（Refunded Amount）
│   └── 实际收款金额（Actual Amount）
├── 状态术语
│   ├── 支付状态（Payment Status）
│   ├── 退款状态（Refund Status）
│   ├── 流水状态（Transaction Status）
│   └── 流水类型（Transaction Type）
├── 业务操作术语
│   ├── 合并支付（Batch Payment）
│   ├── 部分支付（Partial Payment）
│   ├── 信用支付（Credit Payment）
│   └── 信用还款（Credit Repayment）
└── 系统集成术语
    ├── 订单系统（Order System）
    ├── 支付渠道（Payment Channel）
    ├── 信用管理系统（Credit Management System）
    └── 财务系统（Finance System）
```

### C. 术语使用检查清单

设计文档编写时的术语检查清单：
- [ ] 所有核心术语与本词汇表保持一致
- [ ] 所有状态枚举使用定义的标准值
- [ ] 中英文术语对照正确
- [ ] 术语层次符合架构层次
- [ ] 新增术语已在词汇表中定义
- [ ] 术语使用符合命名约定
- [ ] 术语变更已记录在演进历史中
